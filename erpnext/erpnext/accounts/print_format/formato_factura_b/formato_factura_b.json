{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2022-10-31 10:10:51.690384",
 "css": "body {\r\n  margin:0mm;\r\n  padding:0;\r\n  \r\n}\r\n\r\ndiv{\r\n    font-size : 10px;\r\n}\r\n\r\n\r\nli {\r\n    list-style: none;\r\n}\r\n.margen0{\r\n    margin-top:4mm;\r\n}\r\n.margen1{\r\n    margin-top:30mm;\r\n    margin-left:-2mm;\r\n}\r\n.margen{\r\n    margin-top:0mm;\r\n}\r\n.margen2{\r\n    margin-top:59mm;\r\n}\r\n.margenc2-s2{\r\n    margin-left:-3mm;\r\n    margin-top:3mm;\r\n    width: 55mm;\r\n}\r\n.margenc2-s3{\r\n    margin-left:1mm;\r\n}\r\n.margen3{\r\n     margin-top:30mm;\r\n}\r\n\r\n.container1{\r\n    width:156mm;\r\n    margin-left: 3mm;\r\n    float:left;\r\n    \r\n}\r\n.container2{\r\n    width:60mm;\r\n    float:left;\r\n    margin-left:11mm;\r\n}\r\n.itema{\r\n    width:140mm;\r\n    height:19mm;\r\n    margin-top:0mm;\r\n}\r\n.itemb{\r\n    margin-left:3mm;\r\n    width:150mm;\r\n    height:42mm;\r\n   /*  overflow: hidden;*/\r\n    margin-bottom:5mm;\r\n   \r\n \r\n    \r\n}\r\n.item1{\r\n   width:145mm \r\n}\r\n.item2{\r\n    width:70mm;\r\n    float:left;\r\n}\r\n\r\n.item3a{\r\n    width:26mm;\r\n    height: 9mm;\r\n    float: left;\r\n    margin-left: 6mm;\r\n}\r\n.item3b{\r\n    width:21mm;\r\n    height: 9mm;\r\n    float: left;\r\n    margin-left: 5mm;\r\n}\r\n.item3ab{\r\n    width:26mm;\r\n    height: 9mm;\r\n    float: left;\r\n    margin-left: 8mm;\r\n}\r\n.item4{\r\n width:15mm;\r\n  height: 9mm;\r\n    float: left; \r\n    margin-top:0mm;\r\n    margin-left: 3mm;\r\n     margin-right: 2mm;\r\n}\r\n\r\n.item5{\r\n    width:40mm;\r\n    height:25mm;\r\n    margin-top:8mm;\r\n    margin-left:20mm;\r\n}\r\n.item5b{\r\n    width:45mm;\r\n    height:10mm;\r\n    margin-top:-2mm;\r\n    margin-left:3mm;\r\n}\r\n.item6{\r\n    width:34mm;\r\n    height:15mm;\r\n    margin-left:126mm;\r\n}\r\n.item7{\r\n    width:44mm;\r\n    margin-left:56mm;\r\n    float:left;\r\n}\r\n.item8{\r\n    margin-top:-2mm;\r\n    width:40mm;\r\n    margin-left:15mm;\r\n    float:left;\r\n}\r\n.item9{\r\n    width:48mm;\r\n    \r\n    float:left;\r\n    \r\n}\r\n\r\n.box1{\r\n    width:14mm;\r\n    float:left;\r\n    margin-left:7mm;\r\n    margin-top:-2mm;\r\n    /*font-size: 10px;*/\r\n}\r\n.box1b{\r\n    width:14mm;\r\n    float:left;\r\n    margin-left:2mm;\r\n    margin-top:-2mm;\r\n        /*font-size: 9px;*/\r\n\r\n}\r\n/*altura de los items*/\r\n.box2{\r\n    width:93mm;\r\n    margin-left:2mm;\r\n    margin-right:5mm;\r\n    margin-top:-2mm;\r\n    height:9mm;\r\n    overflow: hidden;\r\n    float:left;\r\n        /*font-size: 10px;*/\r\n\r\n    \r\n}\r\n.box3{\r\n    width:8mm;\r\n    float:left;\r\n    margin-top:-2mm;\r\n        /*font-size: 9px;*/\r\n\r\n}\r\n.fac1{\r\n    margin-top:-1mm;\r\n    margin-left:108mm;\r\n}\r\n.fact2{\r\n    margin-left:10mm;\r\n}\r\n\r\n",
 "custom_format": 1,
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 8,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \" \"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"HTML Personalizado\", \"fieldtype\": \"HTML\", \"options\": \"<p>Nombre: {{doc.customer_name}}</p>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Accounting Dimensions\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"cost_center\", \"print_hide\": 0, \"label\": \"Centro de costos\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Customer PO Details\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"po_date\", \"print_hide\": 0, \"label\": \"Fecha de pedido de compra del cliente\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Address and Contact\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"address_display\", \"print_hide\": 0, \"label\": \"Direcci\\u00f3n\"}, {\"fieldname\": \"contact_display\", \"print_hide\": 0, \"label\": \"Contacto\"}, {\"fieldname\": \"contact_mobile\", \"print_hide\": 0, \"label\": \"N\\u00ba M\\u00f3vil\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"dispatch_address\", \"print_hide\": 0, \"label\": \"Dispatch Address\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Warehouse\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"set_target_warehouse\", \"print_hide\": 0, \"label\": \"Asignar Almac\\u00e9n Destino\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Items\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"scan_barcode\", \"print_hide\": 0, \"label\": \"Escanear C\\u00f3digo de Barras\"}, {\"fieldname\": \"items\", \"print_hide\": 0, \"label\": \"Productos\", \"visible_columns\": [{\"fieldname\": \"item_code\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"description\", \"print_width\": \"200px\", \"print_hide\": 0}, {\"fieldname\": \"image\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"qty\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"stock_uom\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"uom\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"discount_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"rate\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"stock_uom_rate\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"grant_commission\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"asset\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"finance_book\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"discount_account\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"deferred_revenue_account\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"service_stop_date\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"enable_deferred_revenue\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"service_start_date\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"service_end_date\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"quality_inspection\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"serial_no\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"project\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"Pricing Rules\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"pricing_rules\", \"print_hide\": 0, \"label\": \"Detalle de la regla de precios\", \"visible_columns\": [{\"fieldname\": \"pricing_rule\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"item_code\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"margin_type\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"rate_or_discount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"rule_applied\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"total_qty\", \"print_hide\": 0, \"label\": \"Cantidad total\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"total\", \"print_hide\": 0, \"label\": \"Total\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"taxes\", \"print_hide\": 0, \"label\": \"Impuestos y cargos sobre ventas\", \"visible_columns\": [{\"fieldname\": \"charge_type\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"row_id\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"account_head\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"description\", \"print_width\": \"300px\", \"print_hide\": 0}, {\"fieldname\": \"included_in_paid_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"cost_center\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"rate\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"account_currency\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"tax_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"total\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"tax_amount_after_discount_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"base_tax_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"base_total\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"base_tax_amount_after_discount_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"item_wise_tax_detail\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"Loyalty Points Redemption\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"loyalty_redemption_account\", \"print_hide\": 0, \"label\": \"Cuenta de Redenci\\u00f3n\"}, {\"fieldname\": \"loyalty_redemption_cost_center\", \"print_hide\": 0, \"label\": \"Centro de Costos de Redenci\\u00f3n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Additional Discount\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"is_cash_or_non_trade_discount\", \"print_hide\": 0, \"label\": \"Is Cash or Non Trade Discount\"}, {\"fieldname\": \"additional_discount_account\", \"print_hide\": 0, \"label\": \"Discount Account\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"grand_total\", \"print_hide\": 0, \"label\": \"Total\"}, {\"fieldname\": \"rounded_total\", \"print_hide\": 0, \"label\": \"Total redondeado\"}, {\"fieldname\": \"in_words\", \"print_hide\": 0, \"label\": \"En palabras\"}, {\"fieldname\": \"disable_rounded_total\", \"print_hide\": 0, \"label\": \"Desactivar redondeo\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Advance Payments\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"allocate_advances_automatically\", \"print_hide\": 0, \"label\": \"Asignar adelantos autom\\u00e1ticamente (FIFO)\"}, {\"fieldname\": \"get_advances\", \"print_hide\": 0, \"label\": \"Obtener anticipos recibidos\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Payment Terms\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"ignore_default_payment_terms_template\", \"print_hide\": 0, \"label\": \"Ignore Default Payment Terms Template\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Terms and Conditions\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"terms\", \"print_hide\": 0, \"label\": \"Detalle de t\\u00e9rminos y condiciones\"}, {\"fieldtype\": \"Section Break\", \"label\": \"More Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"inter_company_invoice_reference\", \"print_hide\": 0, \"label\": \"Referencia de factura de Inter Company\"}, {\"fieldname\": \"represents_company\", \"print_hide\": 0, \"label\": \"Representa a la Compa\\u00f1\\u00eda\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"is_internal_customer\", \"print_hide\": 0, \"label\": \"Es Cliente Interno\"}, {\"fieldname\": \"is_discounted\", \"print_hide\": 0, \"label\": \"Tiene descuento\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Accounting Details\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"unrealized_profit_loss_account\", \"print_hide\": 0, \"label\": \"Unrealized Profit / Loss Account\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Commission\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"amount_eligible_for_commission\", \"print_hide\": 0, \"label\": \"Amount Eligible for Commission\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Subscription Section\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"update_auto_repeat_reference\", \"print_hide\": 0, \"label\": \"Actualizar la Referencia de Repetici\\u00f3n Autom\\u00e1tica\"}]",
 "html": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css\" integrity=\"sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N\" crossorigin=\"anonymous\">\r\n</head>\r\n<body>\r\n  \r\n        <div style=\"margin-bottom:7mm\">\r\n            &nbsp;\r\n        </div>\r\n      \r\n        {% set num = frappe.db.sql(\"\"\" \r\n            select phone from `tabContact Phone` where parent in (select parent from `tabDynamic Link` where \r\n            link_name = %(customer)s and parenttype = 'Contact') limit 1; \"\"\", {\"customer\" : doc.customer} ) %}\r\n        \r\n        {% set customer_info = frappe.db.sql(\"\"\" SELECT ruc,territory, municipio, address_line1,factura_cordoba,mobile_no,customer_name FROM `tabCustomer` where name =  %(customer)s  \"\"\", {\"customer\":doc.customer}) %}\r\n        \r\n         \r\n        {%if frappe.db.get_value(\"Customer\",{\"name\":doc.customer},\"factura_desglosada\") == 1 %} \r\n                {% set items = frappe.db.sql(\"\"\"select * from vista_planes_facturas where name = %(name)s ;\"\"\",{\"name\": doc.name}) %}\r\n        {%else%}\r\n                {% set items = frappe.db.sql(\"\"\"select * from vista_planes_facturas where name = %(name)s and descripcion not in ('GponTv22','ITV22');\"\"\",{\"name\": doc.name}) %}\r\n        {%endif%}        \r\n        {% set items2 = frappe.db.sql(\"\"\"select descripcion,rate,qty, description from `tabSales Invoice Item` where parent = %(parent)s\"\"\",{\"parent\":doc.name})%}\r\n        \r\n        {% set collector = frappe.db.sql(\"\"\" select name, telefono from vista_colector where link_name = %(customer)s limit 1;\"\"\", {\"customer\":doc.customer}) %}\r\n      \r\n    <section class=\"margen0\">\r\n        <div class=\"container1\">\r\n            <div class=\"fac1\" style=\"color: red;\">\r\n                 {% set factura = doc.name.partition('-1') %}\r\n                {{factura[0]}}\r\n            </div>\r\n        </div>\r\n        <div class=\"container2\">\r\n            <div class=\"fac2\">\r\n                {{factura[0]}}\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <br>\r\n\r\n    <section class=\"margen0\">    \r\n        <div class=\"container1\">\r\n            <div class=\"itema\">\r\n                <div class=\"item1\">&nbsp;Nombre: {{ (doc.customer_name|replace(\"/\",\"\")).upper() }} </div>\r\n                <div class=\"item2\">&nbsp;Telefono: {%if num%}{{num[0][0]}}{%else%}{%if customer_info[0][5]%}{{customer_info[0][5]}}{%endif%}{%endif%} </div>\r\n                <div class=\"item2\">&nbsp;RUC: {%if customer_info[0][0]%}{{customer_info[0][0]}}{%else%} {%endif%}</div>\r\n               \r\n                <div class=\"item2\">&nbsp;Departamento:  {%if customer_info[0][1]%}{{(customer_info[0][1]).upper()}}{%else%}  {%endif%}</div>\r\n                <div class=\"item2\">&nbsp;Municipio:  {%if customer_info[0][2]%}{{(customer_info[0][2]|replace(\"Mun\", \"\")).upper()}}{%else%}  {%endif%}</div>\r\n                <div class=\"item1\">&nbsp;Direccion:  {%if customer_info[0][3]%}{{ (customer_info[0][3]).upper() }}{%else%}  {%endif%}</div>\r\n               \r\n            </div>\r\n        </div>\r\n        <div class=\"container2\">\r\n            <div class=\"margenc2-s2\">\r\n                <div><small>{{ (customer_info[0][6]|replace(\"/\",\"\")).upper() }}</small></div>\r\n                <div> {% if num %}{{num[0][0]}}{% endif %} </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n   \r\n   <section class=\"margen1\">\r\n       <div class=\"container1\">\r\n           <div class=\"item3a\">{{doc.customer}} </div>\r\n           <div class=\"item3b\">{{ frappe.utils.formatdate(doc.posting_date, \"MMMM\") }}</div>\r\n           <div class=\"item3b\">{{ frappe.utils.get_datetime(doc.posting_date).strftime(\"%d %b, %Y\") }}</div>\r\n           <div class=\"item3ab\">{{ frappe.utils.get_datetime(doc.due_date).strftime(\"%d %b, %Y\") }}</div>\r\n           <div class=\"item3ab\">{% set saldo = frappe.db.sql(\"\"\" select sum(outstanding_amount) from `tabSales Invoice` where customer = %(customer)s and docstatus = 1 and name not in (%(name)s); \"\"\", {\"customer\":doc.customer, \"name\":doc.name}) %}{%if saldo[0][0]%}{{ \"{:,}\".format(saldo[0][0] | round(2) ) }}{%endif%}</div>\r\n       </div>\r\n       <div class=\"container2\">\r\n           <div class=\"margenc2-s3\">\r\n                <div class=\"item4\">{% set saldo = frappe.db.sql(\"\"\" select currency, sum(outstanding_amount) from `tabSales Invoice` where customer = %(customer)s and docstatus = 1 \"\"\", {\"customer\":doc.customer}) %}{%if saldo[0][0]%}{{saldo[0][0]}}{%endif%}</div>\r\n                <div class=\"item4\">{{ frappe.utils.formatdate(doc.posting_date, \"MMMM\") }}</div>\r\n           </div>\r\n       </div>\r\n   </section>\r\n   <section class=\"margen\">\r\n       <div class=\"container1\">\r\n            <div class=\"itemb\">\r\n                {% if doc.tipo_factura == \"Prorrateo\" or doc.tipo_factura == \"Recurrente\" or doc.tipo_factura == \"Recurrente B\" %}\r\n                {% for item in items %}\r\n                    \r\n                    {% set name = item[3].partition(' -') %}\r\n                    <div>&nbsp;</div>\r\n                    \r\n                    <div class=\"box3\">&nbsp;&nbsp;1 </div>\r\n                    <div class=\"box2\" style = ' font-size : 10px;'>&nbsp;{%if item[8]%}{{item[8]}}{%else%}{{name[0]}}{%endif%}{%if item[11]%} - Aplica promoci\u00f3n \"{{item[11]}}\"{%endif%} De {{ frappe.utils.get_datetime(doc.posting_date).strftime(\"%b %d, %y\")}} A {{frappe.utils.get_datetime(frappe.utils.get_last_day(doc.posting_date)).strftime(\"%b %d, %y\")}}</div>\r\n                    {% set amount = \"%.2f\"|format(item[5]|float) %}\r\n                 \r\n                    {% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                        <div class=\"box1\" style = ' font-size : 10px;'>&nbsp;&nbsp;{{  \"{:,}\".format(((amount | float ) * (doc.conversion_rate|float))|round(2))  }}</div>\r\n                        <div class=\"box1b\" style = ' font-size : 10px;'>&nbsp;&nbsp;{{  \"{:,}\".format(((amount | float ) * (doc.conversion_rate|float))|round(2))  }}</div>\r\n                    {% else %}\r\n                    <div class=\"box1\">&nbsp;&nbsp;{{\"{:,}\".format( amount | float ) }}</div>\r\n                    <div class=\"box1b\">&nbsp;&nbsp;{{ \"{:,}\".format( amount | float ) }}</div>\r\n                     {% endif %}\r\n                 \r\n                                \r\n                    <div>&nbsp;&nbsp;</div>\r\n                {% endfor %}\r\n                {% elif doc.tipo_factura == \"Venta de Equipos\" or doc.tipo_factura == \"Prorrateo+\" %}\r\n                    {% for itemx in items2 %}\r\n                        <div>&nbsp;</div>\r\n                        {% set number = itemx[2] | int %}\r\n                        {% if itemx[1]>0 %}\r\n                        {% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                        <div class=\"box3\">{{number}}</div>\r\n                        <div class=\"box2\">&nbsp;&nbsp;{%if itemx[0]%}{{itemx[0]}}{%else%}{{itemx[3]}}{%endif%}</div>\r\n                        <div class=\"box1\">&nbsp;&nbsp;{{ \"{:,}\".format( (itemx[1]*doc.conversion_rate)| round(2) )}}</div>\r\n                        <div class=\"box1b\">&nbsp;&nbsp;{{ \"{:,}\".format( (itemx[1] * number*doc.conversion_rate) | round(2) ) }}</div>\r\n                        {% else %}\r\n                        <div class=\"box3\">{{number}}</div>\r\n                        <div class=\"box2\">&nbsp;&nbsp;{{itemx[0]}}</div>\r\n                        <div class=\"box1\">&nbsp;&nbsp;{{ \"{:,}\".format( (itemx[1])| round(2) ) }}</div>\r\n                        <div class=\"box1b\">&nbsp;&nbsp;{{ \"{:,}\".format( (itemx[1] * number) | round(2) ) }}</div>\r\n                         {% endif %}\r\n                         {% endif %}\r\n                       \r\n                                    \r\n                       \r\n                         <div>&nbsp;</div>\r\n                    {% endfor %}\r\n                \r\n                    \r\n                   {% elif doc.tipo_factura == \"Traslado de Servicio\" or doc.tipo_factura == \"TV Adicional\" or doc.tipo_factura == \"Instalacion OTC\" or doc.tipo_factura == \"Cableado\" %}\r\n                    {% for itemx in items2 %}\r\n                        <div>&nbsp;</div>\r\n                    \r\n                        <div class=\"box3\">&nbsp;&nbsp;1 </div>\r\n                        <div class=\"box2\">&nbsp;&nbsp;{%if itemx[0] %}{{itemx[0]}}{%else%}{{itemx[3]}}{%endif%}</div>\r\n                        <div class=\"box1\">&nbsp;&nbsp;{{ \"{:,}\".format(  itemx[1] ) }}</div>\r\n                        <div class=\"box1b\">&nbsp;&nbsp;{{ \"{:,}\".format( itemx[1] ) }}</div>\r\n                       \r\n                                    \r\n                        <div>&nbsp;</div>\r\n                    {% endfor %}\r\n                   {% elif doc.tipo_factura == \"Facturacion\" %}\r\n               \r\n                    <div>&nbsp;</div>\r\n                \r\n                    <div class=\"box3\">&nbsp;&nbsp;1 </div>\r\n                    <div class=\"box2\">&nbsp;&nbsp;Cargo recurrente por servicios IBW De {{ frappe.utils.get_datetime(doc.posting_date).strftime(\"%b %d, %y\")}} A {{frappe.utils.get_datetime(frappe.utils.get_last_day(doc.posting_date)).strftime(\"%b %d, %y\")}}</div>\r\n                    <div class=\"box1\">&nbsp;&nbsp;{% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                    {{ \"{:,}\".format( (doc.total*doc.conversion_rate) | round(2) )}}\r\n                    {%else%}\r\n                    {{\"{:,}\".format( doc.total)}}\r\n                    {%endif%}</div>\r\n                    <div class=\"box1b\">&nbsp;&nbsp;{% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                    {{ \"{:,}\".format( (doc.total*doc.conversion_rate) | round(2) )}}\r\n                    {%else%}\r\n                    {{\"{:,}\".format( doc.total)}}\r\n                    {%endif%}</div>\r\n                    <div>&nbsp;</div>\r\n                    \r\n                    \r\n                    \r\n                {%else%}\r\n                    {% for itemx in items2 %}\r\n                        <div>&nbsp;</div>\r\n                    \r\n                        <div class=\"box3\">&nbsp;&nbsp;1 </div>\r\n                        <div class=\"box2\">&nbsp;&nbsp;{{itemx[0]}} De {{ frappe.utils.get_datetime(doc.posting_date).strftime(\"%b %d, %y\")}} A {{frappe.utils.get_datetime(frappe.utils.get_last_day(doc.posting_date)).strftime(\"%b %d, %y\")}}</div>\r\n                        <div class=\"box1\">&nbsp;&nbsp;{{ \"{:,}\".format( itemx[1] )}}</div>\r\n                        <div class=\"box1b\">&nbsp;&nbsp;{{ \"{:,}\".format( itemx[1] )}}</div>\r\n                       \r\n                                    \r\n                        <div>&nbsp;</div>\r\n                    {% endfor %}\r\n                {%endif%}\r\n                \r\n            </div>\r\n       </div>\r\n       <div class=\"container2\">\r\n           <div class=\"item5\">\r\n                {% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format(  (doc.total*doc.conversion_rate) | round(2) )}}</div>\r\n               <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format(  (doc.total_taxes_and_charges*doc.conversion_rate) | round(2) ) }}</div>\r\n               <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format(  (doc.grand_total*doc.conversion_rate) | round(2) ) }}</div>                  \r\n                {%else%}      \r\n                <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{ \"{:,}\".format(  doc.total )}}</div>\r\n               <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{\"{:,}\".format(  doc.total_taxes_and_charges) }}</div>\r\n               <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{\"{:,}\".format( doc.grand_total )}}</div>               \r\n                {%endif%}\r\n                \r\n\r\n           </div>\r\n           <div class=\"item5b\">\r\n               {{doc.customer}}\r\n           </div>\r\n       </div>\r\n   </section>\r\n   <section class=\"margen3\">\r\n       <div class=\"contaner1\">\r\n           <div class=\"item6\">\r\n                {% if doc.currency == \"USD\" and customer_info[0][4]==1%}\r\n                <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format( (doc.total*doc.conversion_rate) | round(2) )}}</div>\r\n               <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format( (doc.total_taxes_and_charges*doc.conversion_rate) | round(2))}}</div>\r\n               <div>C$ &nbsp;&nbsp;{{ \"{:,}\".format( (doc.grand_total*doc.conversion_rate) | round(2))}}</div>                  \r\n                {%else%}      \r\n                <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{\"{:,}\".format( doc.total)}}</div>\r\n               <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{\"{:,}\".format( doc.total_taxes_and_charges)}}</div>\r\n               <div>{%if doc.currency == 'USD'%} $ {% else %} C$ {%endif%} &nbsp;&nbsp;{{\"{:,}\".format( doc.grand_total)}}</div>               \r\n                {%endif%}\r\n           </div>\r\n       </div>\r\n   </section>\r\n   <section class=\"margen2\">\r\n       <div class=\"container1\">\r\n           <div class=\"item7\">\r\n               {% if doc.currency == \"USD\" and customer_info[0][4]==0 %}\r\n                    C\u00f3rdobas=> C$    {{\"{:,}\".format( doc.base_grand_total)}}\r\n                {% elif doc.currency == \"NIO\" or customer_info[0][4]==1 %}\r\n                    D\u00f3lares=> $   {{\"{:,}\".format( (doc.base_grand_total / doc.tc_facturas | float) | round(2)) }}\r\n                {% elif doc.currency == \"USD\" or customer_info[0][4]==1 %}\r\n                    D\u00f3lares=> $   {{\"{:,}\".format( (doc.base_grand_total / doc.tc_facturas | float) | round(2)) }}\r\n               {% endif%}\r\n           </div>\r\n           <div class=\"item8\">\r\n               {% if collector %}\r\n                    {{collector[0][0]}}\r\n               {% else %}\r\n                Sin colector\r\n               {% endif %}\r\n           </div>\r\n       </div>\r\n       <div class=\"container2\">\r\n           <div class=\"item9\">\r\n               {% if doc.currency == \"USD\"%}\r\n                    C\u00f3rdobas=>C$    {{ \"{:,}\".format( doc.base_grand_total)}}\r\n                {% elif doc.currency == \"NIO\" %}\r\n                    C\u00f3rdobas=> C$   {{\"{:,}\".format( (doc.base_grand_total / doc.tc_facturas | float) | round(2)) }}\r\n                {% elif doc.currency == \"NIO\" %}\r\n                    D\u00f3lares=> $   {{\"{:,}\".format( (doc.base_grand_total / doc.tc_facturas | float) | round(2)) }}\r\n               {% endif%}\r\n           </div>\r\n       </div>\r\n   </section>\r\n\r\n</body>\r\n</html>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 12.0,
 "margin_left": 5.0,
 "margin_right": 5.0,
 "margin_top": 23.0,
 "modified": "2023-12-14 14:14:00.059422",
 "modified_by": "Administrator",
 "module": "Accounts",
 "name": "Formato FACTURA B",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 1,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}