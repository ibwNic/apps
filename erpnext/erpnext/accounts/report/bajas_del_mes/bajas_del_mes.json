{
 "add_total_row": 0,
 "columns": [],
 "creation": "2023-02-27 15:54:17.781748",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [
  {
   "fieldname": "FechaD",
   "fieldtype": "Datetime",
   "label": "Fecha Desde",
   "mandatory": 1,
   "wildcard_filter": 0
  },
  {
   "fieldname": "FechaH",
   "fieldtype": "Datetime",
   "label": "Fecha Hasta",
   "mandatory": 1,
   "wildcard_filter": 0
  }
 ],
 "idx": 0,
 "is_standard": "Yes",
 "modified": "2023-09-04 11:19:10.243812",
 "modified_by": "Administrator",
 "module": "Accounts",
 "name": "Bajas del mes",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "select\ns.party as cliente,\ns.nombre_del_cliente as nombre,\ncu.company_name as Compania,\nad.departamento,\ncu.customer_group as Tipo_Cliente,\nspd.name as Plan_ID,\nspd.estado_plan,\nspd.plan,\nspd.cost as precio,\n        CASE\n            WHEN `spd`.`currency` = 'USD' THEN `spd`.`cost`\n            WHEN `spd`.`currency` = 'NIO' THEN `sp`.`cost` / `sp`.`tipocambio`\n        END AS `precio_dolar`,\nsp.item_group as portafolio,\nspd.service_start,\nspd.service_end,\nspd.motivo_finalizado,\n(select GROUP_CONCAT(CONCAT('\"', equipo, '\"')) AS N_Serie from `tabSubscription Plan Equipos` t1 inner join `tabSubscription` t2 on t1.parent = t2.name where t1.parent = (s.name) limit 1) as Mac,\nsp.tipo_de_plan as Tipo_Servicio,\n(select op.payback from `tabCustomer` cus inner join `tabOpportunity` op on  op.customer = cus.name where op.customer = (cu.name) limit 1)as Payback,\ns.vendedor,\n(select canal_general from `tabSales Person` where name = (select sales.parent_sales_person from `tabSales Person` sales where sales.name = (select sales.parent_sales_person from `tabSubscription` sub inner join `tabSales Person` sales on sales.name = sub.vendedor where sales.name = (s.vendedor) limit 1)limit 1) limit 1) as Canal_General,\n(select sales.parent_sales_person from `tabSales Person` sales where sales.name = (select sales.parent_sales_person from `tabSubscription` sub inner join `tabSales Person` sales on sales.name = sub.vendedor where sales.name = (s.vendedor) limit 1)) as Canal,\n(select usuario from `tabSales Person` where name = (select sales.parent_sales_person from `tabSales Person` sales where sales.name = (select sales.parent_sales_person from `tabSubscription` sub inner join `tabSales Person` sales on sales.name = sub.vendedor where sales.name = (s.vendedor) limit 1)limit 1) limit 1) as Coordinador,\nday(spd.service_end) as dia,\nmonth(spd.service_end) as mes,\nyear(spd.service_end) as a\u00f1o,\ns.name as contrato,\ns.no_contrato as no_contrato,\nad.municipio,\nad.barrio\nfrom `tabSubscription Plan Detail` spd\ninner join   `tabSubscription` s on spd.parent = s.name\ninner join  `tabSubscription Plan` sp on sp.name = spd.plan\ninner join `tabAddress` ad on ad.name = spd.direccion\ninner join `tabCustomer` cu on  cu.name = s.party\nwhere spd.service_end is not null \nand spd.motivo_finalizado not in ('Cambio de tipo de Servicio IBW','Cambio de Servicio','Cambio de Raz\u00f3n Social','Contrato Temporal')\nand spd.estado_plan='Plan Cerrado'\nand spd.service_end >= %(FechaD)s and spd.service_end <= %(FechaH)s",
 "ref_doctype": "Subscription",
 "report_name": "Bajas del mes",
 "report_script": "",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "System Manager"
  },
  {
   "role": "Accounts Manager"
  },
  {
   "role": "Accounts User"
  },
  {
   "role": "Sales User"
  },
  {
   "role": "Back Office"
  },
  {
   "role": "Administrador Caja"
  }
 ]
}